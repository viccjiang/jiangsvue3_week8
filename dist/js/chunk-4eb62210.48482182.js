(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eb62210"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3");var r=n("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},"09dc":function(t,e,n){"use strict";n.r(e);n("a4d3"),n("e01a"),n("caad"),n("2532");var r=n("7a23"),i={class:"container "},c={class:"row"},a={class:"col-3 mt-4"},o={class:"list-group rounded-0"},s={class:"col-9"},u={class:"row mt-4"},d={class:"col mb-4"},l={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 "},b={class:"card h-100 rounded-0 "},f={class:"card-body"},g={class:"badge bg-secondary text-light mb-2"},p={class:"card-title"},v={class:"h6 text-secondary"},h={key:0,class:"h5 list-inline-item "},j={key:1,class:"h6 list-inline-item text-secondary mt-4"},O={key:2,class:"h5 text-danger mb-3"},m={class:"d-grid gap-2 col-12 mx-auto"},y={key:0,class:"spinner-border text-danger spinner-border-sm",role:"status"},k=Object(r["i"])("span",{class:"visually-hidden"},"Loading...",-1),x=Object(r["h"])(" 加到購物車 ");function w(t,e,n,w,C,A){var S=this,F=Object(r["D"])("Loading"),I=Object(r["D"])("Pagination");return Object(r["u"])(),Object(r["e"])(r["a"],null,[Object(r["i"])(F,{active:t.isLoading},null,8,["active"]),Object(r["i"])("div",i,[Object(r["i"])("div",c,[Object(r["i"])("div",a,[Object(r["i"])("div",o,[(Object(r["u"])(!0),Object(r["e"])(r["a"],null,Object(r["B"])(C.categories,(function(t){return Object(r["u"])(),Object(r["e"])("a",{href:"#",key:t,class:"list-group-item list-group-item-action ",onClick:Object(r["Q"])((function(e){return C.selectCategory=t}),["prevent"])},Object(r["G"])(t),9,["onClick"])})),128))])]),Object(r["i"])("div",s,[Object(r["i"])("div",u,[Object(r["i"])("div",d,[Object(r["i"])("div",l,[(Object(r["u"])(!0),Object(r["e"])(r["a"],null,Object(r["B"])(A.filterProducts,(function(e){return Object(r["u"])(),Object(r["e"])("div",{class:"col ",key:e.id},[Object(r["i"])("div",b,[Object(r["i"])("a",{href:"#",class:"rounded-0 border",onClick:Object(r["Q"])((function(t){return A.getProduct(e.id)}),["prevent"])},[Object(r["i"])("div",{style:[{height:"300px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}]},null,4)],8,["onClick"]),Object(r["i"])("div",f,[Object(r["i"])("span",g,Object(r["G"])(e.category),1),Object(r["i"])("h5",p,Object(r["G"])(e.title),1),Object(r["i"])("h6",v,Object(r["G"])(e.description),1),e.price?Object(r["f"])("",!0):(Object(r["u"])(),Object(r["e"])("div",h,Object(r["G"])(e.origin_price)+" 元 ",1)),e.price?(Object(r["u"])(),Object(r["e"])("del",j,"原價 NT$ "+Object(r["G"])(t.$filters.currency(e.origin_price))+" 元",1)):Object(r["f"])("",!0),e.price?(Object(r["u"])(),Object(r["e"])("div",O," NT$ "+Object(r["G"])(t.$filters.currency(e.price))+" 元 ",1)):Object(r["f"])("",!0),Object(r["i"])("div",m,[Object(r["i"])("button",{type:"button",class:"btn btn-outline-secondary rounded-0 border",disabled:S.status.loadingItem===e.id,onClick:function(t){return A.addCart(e.id)}},[S.status.loadingItem===e.id?(Object(r["u"])(),Object(r["e"])("div",y,[k])):Object(r["f"])("",!0),x],8,["disabled","onClick"]),Object(r["i"])("button",{type:"button",onClick:function(t){return A.addMyFavorite(e)},class:[{active:C.myFavorite.includes(e.id)},"btn d-block btn-outline-secondary rounded-0 border"]}," 加到我的最愛 ",10,["onClick"]),Object(r["i"])("button",{type:"button",class:"btn btn-outline-secondary rounded-0 border",onClick:function(t){return A.getProduct(e.id)}}," 查看更多 ",8,["onClick"])])])])])})),128))])]),Object(r["i"])(I,{pages:C.pagination,onEmitPages:A.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}var C=n("6b75");function A(t){if(Array.isArray(t))return Object(C["a"])(t)}n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function S(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var F=n("06c5");function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(t){return A(t)||S(t)||Object(F["a"])(t)||I()}n("a434"),n("99af"),n("6062"),n("159b"),n("4de4"),n("ac1f"),n("466d");var $=n("cfb9"),_=n("1799"),E={save:function(t){var e=JSON.stringify(t);localStorage.setItem("hexFavorite",e)},get:function(){return JSON.parse(localStorage.getItem("hexFavorite"))}},G={data:function(){return{products:[],product:{},pagination:{},status:{loadingItem:""},categories:[],selectCategory:"",myFavorite:E.get()||[]}},components:{Pagination:_["a"]},provide:function(){return{emitter:$["a"]}},methods:{addMyFavorite:function(t){console.log("addMyFavorite"),this.myFavorite.includes(t.id)?this.myFavorite.splice(this.myFavorite.indexOf(t.id),1):this.myFavorite.push(t.id),console.log(this.myFavorite)},getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jiangsvue3","/products/?page=").concat(e);this.isLoading=!0,this.$http.get(n).then((function(e){t.products=e.data.products,console.log("products:",e),t.isLoading=!1,e.data.success&&(console.log(e.data),t.products=e.data.products,t.pagination=e.data.pagination,t.getCategories())}))},getCategories:function(){var t=new Set;this.products.forEach((function(e){t.add(e.category)})),this.categories=P(t)},getProduct:function(t){this.$router.push("/product/".concat(t))},addCart:function(t){var e=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jiangsvue3","/cart");this.status.loadingItem=t;var r={product_id:t,qty:1};this.$http.post(n,{data:r}).then((function(t){e.status.loadingItem="",console.log(t),$["a"].emit("update-cart")}))}},watch:{myFavorite:{handler:function(){E.save(this.myFavorite)},deep:!0}},computed:{filterProducts:function(){var t=this;return this.products.filter((function(e){return e.category.match(t.selectCategory)}))}},created:function(){this.getProducts()}};G.render=w;e["default"]=G},1799:function(t,e,n){"use strict";var r=n("7a23"),i={"aria-label":"Page navigation example "},c={class:"pagination justify-content-center"},a=Object(r["i"])("span",null,"«",-1),o=Object(r["i"])("span",null,"»",-1);function s(t,e,n,s,u,d){return Object(r["u"])(),Object(r["e"])("nav",i,[Object(r["i"])("ul",c,[Object(r["i"])("li",{class:["page-item",n.pages.has_pre?"":"disabled"]},[Object(r["i"])("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=Object(r["Q"])((function(e){return t.$emit("emit-pages",n.pages.current_page-1)}),["prevent"]))},[a])],2),(Object(r["u"])(!0),Object(r["e"])(r["a"],null,Object(r["B"])(n.pages.total_pages,(function(e,i){return Object(r["u"])(),Object(r["e"])("li",{class:["page-item",e===n.pages.current_page?"active":""],key:i},[Object(r["i"])("a",{class:"page-link",href:"#",onClick:Object(r["Q"])((function(n){return t.$emit("emit-pages",e)}),["prevent"])},Object(r["G"])(e),9,["onClick"])],2)})),128)),Object(r["i"])("li",{class:["page-item",n.pages.has_next?"":"disabled"]},[Object(r["i"])("a",{class:"page-link",href:"#",onClick:e[2]||(e[2]=Object(r["Q"])((function(e){return t.$emit("emit-pages",n.pages.current_page+1)}),["prevent"]))},[o])],2)])])}var u={props:["pages"],methods:{updatePage:function(t){this.$emit("emit-pages",t)}}};u.render=s;e["a"]=u},2532:function(t,e,n){"use strict";var r=n("23e7"),i=n("5a34"),c=n("1d80"),a=n("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(c(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),c=n("b622"),a=c("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},"466d":function(t,e,n){"use strict";var r=n("d784"),i=n("825a"),c=n("50c4"),a=n("1d80"),o=n("8aa5"),s=n("14c3");r("match",(function(t,e,n){return[function(e){var n=a(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,this,t);if(r.done)return r.value;var a=i(this),u=String(t);if(!a.global)return s(a,u);var d=a.unicode;a.lastIndex=0;var l,b=[],f=0;while(null!==(l=s(a,u))){var g=String(l[0]);b[f]=g,""===g&&(a.lastIndex=o(u,c(a.lastIndex),d)),f++}return 0===f?null:b}]}))},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),c=n("9bdd"),a=n("e95a"),o=n("50c4"),s=n("8418"),u=n("35a1");t.exports=function(t){var e,n,d,l,b,f,g=i(t),p="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,j=void 0!==h,O=u(g),m=0;if(j&&(h=r(h,v>2?arguments[2]:void 0,2)),void 0==O||p==Array&&a(O))for(e=o(g.length),n=new p(e);e>m;m++)f=j?h(g[m],m):g[m],s(n,m,f);else for(l=O.call(g),b=l.next,n=new p;!(d=b.call(l)).done;m++)f=j?c(l,h,[d.value,m],!0):d.value,s(n,m,f);return n.length=m,n}},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"9bdd":function(t,e,n){var r=n("825a"),i=n("2a62");t.exports=function(t,e,n,c){try{return c?e(r(n)[0],n[1]):e(n)}catch(a){throw i(t),a}}},a434:function(t,e,n){"use strict";var r=n("23e7"),i=n("23cb"),c=n("a691"),a=n("50c4"),o=n("7b0b"),s=n("65f0"),u=n("8418"),d=n("1dde"),l=d("splice"),b=Math.max,f=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,d,l,v,h,j=o(this),O=a(j.length),m=i(t,O),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=O-m):(n=y-2,r=f(b(c(e),0),O-m)),O+n-r>g)throw TypeError(p);for(d=s(j,r),l=0;l<r;l++)v=m+l,v in j&&u(d,l,j[v]);if(d.length=r,n<r){for(l=m;l<O-r;l++)v=l+r,h=l+n,v in j?j[h]=j[v]:delete j[h];for(l=O;l>O-r+n;l--)delete j[l-1]}else if(n>r)for(l=O-r;l>m;l--)v=l+r-1,h=l+n-1,v in j?j[h]=j[v]:delete j[h];for(l=0;l<n;l++)j[l+m]=arguments[l+2];return j.length=O-r+n,d}})},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),c=n("1c7e"),a=!c((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})},ab13:function(t,e,n){var r=n("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,c=Function.prototype,a=c.toString,o=/^\s*function ([^ (]*)/,s="name";r&&!(s in c)&&i(c,s,{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(t){return""}}})},caad:function(t,e,n){"use strict";var r=n("23e7"),i=n("4d64").includes,c=n("44d2");r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),c("includes")},d28b:function(t,e,n){var r=n("746f");r("iterator")},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),c=n("e8b5"),a=n("23cb"),o=n("50c4"),s=n("fc6a"),u=n("8418"),d=n("b622"),l=n("1dde"),b=l("slice"),f=d("species"),g=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!b},{slice:function(t,e){var n,r,d,l=s(this),b=o(l.length),v=a(t,b),h=a(void 0===e?b:e,b);if(c(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?i(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(l,v,h);for(r=new(void 0===n?Array:n)(p(h-v,0)),d=0;v<h;v++,d++)v in l&&u(r,d,l[v]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-4eb62210.48482182.js.map